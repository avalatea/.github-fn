name: Deploy to prod

run-name: Deploy ${{ inputs.release_version }} to prod by @${{ github.actor }}

# Name of this file without the .yml extension
concurrency:
cancel-in-progress: true

on:
  workflow_dispatch:
    inputs:
      release_version:
        description: "The tag of the release to promote to production. Usually something like '1.2.0'."
        required: true
        type: string

  deploy:
    needs: build
    uses: FiscalNote/fn-shared-github-actions/.github/workflows/de-deploy.yaml@v1.0.1
    with:
      ENVIORNMENT: prod
      # The name of the service in the ops-kubernetes repo
      # https://github.com/FiscalNote/fn-ops-kubernetes/tree/master/helm_vars/defaults
      SERVICE:
      TAG: ${{ inputs.release_version }}
    secrets: inherit
